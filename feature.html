<script>

const API="https://apx.mkapi009.workers.dev/?pair=";

async function generate(){

output.innerHTML="Connecting to API...";

let pair=document.getElementById("pair").value;

try{

let res=await fetch(API+pair+"&tf=M1&limit=10");

if(!res.ok){
output.innerHTML="HTTP Error: "+res.status;
return;
}

let text=await res.text();

console.log("RAW RESPONSE:", text);

try{
let json=JSON.parse(text);
output.innerHTML="<pre style='font-size:10px;white-space:pre-wrap;'>"+JSON.stringify(json,null,2)+"</pre>";
}catch(e){
output.innerHTML="Response is not valid JSON:<br><br>"+text;
}

}catch(e){
output.innerHTML="Fetch Failed: "+e.message;
}

}

</script>
