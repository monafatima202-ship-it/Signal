<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>APX ULTRA API SIGNALS</title>

<style>

body{
background:#06121f;
color:#e6f1ff;
font-family:Arial;
text-align:center;
padding:20px;
}

h1{
color:#00ffc3;
text-shadow:0 0 15px #00ffc3;
}

.card{
background:#0b1f33;
padding:20px;
border-radius:15px;
margin:15px auto;
max-width:420px;
box-shadow:0 0 25px rgba(0,255,195,0.2);
}

select,input,button{
width:90%;
padding:14px;
margin:8px;
border-radius:10px;
border:none;
font-size:16px;
}

select,input{
background:#06121f;
color:#00ffc3;
border:1px solid #00ffc3;
}

button{
background:#00ffc3;
color:#001a14;
font-weight:bold;
cursor:pointer;
}

button:hover{
box-shadow:0 0 20px #00ffc3;
}

#out{
background:#04111c;
padding:15px;
border-radius:12px;
margin-top:20px;
white-space:pre-wrap;
font-size:14px;
}

</style>
</head>

<body>

<h1>ðŸ”¥ APX ULTRA API ðŸ”¥</h1>
<p>UTC+6 â€¢ Premium Candle Engine</p>

<div class="card">

<select id="cat">
<option value="OTC">OTC</option>
<option value="CRYPTO">CRYPTO</option>
<option value="STOCK">STOCK</option>
</select>

<input type="time" id="start" value="01:00">
<input type="time" id="end" value="05:00">

<button onclick="generate()">ðŸš€ Generate API Signals</button>
<button onclick="sendTG()">ðŸ“© Send Telegram</button>

<div id="out">Signals will appear here</div>

</div>

<script>

// ===== CONFIG =====
const API="https://candle.mkapi009.workers.dev";
const SEND="https://signal.mkapi009.workers.dev/send";

const OTC=[
"USDPKR-OTC","USDINR-OTC","USDBRL-OTC",
"USDMXN-OTC","USDBDT-OTC","USDARS-OTC",
"USDEGP-OTC","USDCOP-OTC"
];

const CRYPTO=[
"ETHUSD-OTC","BNBUSD-OTC"
];

const STOCK=[
"MSFT","INTC","PFE","AXP"
];

let SIGNALS=[];

// ===== GET CANDLES =====
async function candles(pair){
try{
let r=await fetch(`${API}/?pair=${pair}&count=60`);
let j=await r.json();
if(!j.candles || j.candles.length<30) return null;
return j.candles.reverse();
}catch{
return null;
}
}

// ===== STRONG TREND SIGNAL =====
function signalEngine(c){

let close=c.map(x=>x.close);

let last=close.slice(-5);
let avg=close.slice(-20).reduce((a,b)=>a+b)/20;

let up=0,down=0;

for(let i=1;i<last.length;i++){
if(last[i]>last[i-1]) up++;
if(last[i]<last[i-1]) down++;
}

if(up>=4 && last[last.length-1]>avg) return "CALL";
if(down>=4 && last[last.length-1]<avg) return "PUT";

return null;
}

// ===== RANDOM TIME =====
function rTime(s,e){
let a=new Date("2020-01-01 "+s);
let b=new Date("2020-01-01 "+e);
let t=new Date(a.getTime()+Math.random()*(b-a));
return t.toTimeString().slice(0,5);
}

// ===== GENERATE =====
async function generate(){

SIGNALS=[];
out.innerText="Loading API Signals...";

let cat=document.getElementById("cat").value;
let start=document.getElementById("start").value;
let end=document.getElementById("end").value;

let pairs=cat=="OTC"?OTC:cat=="CRYPTO"?CRYPTO:STOCK;

for(let p of pairs){

let c=await candles(p);
if(!c) continue;

let sig=signalEngine(c);
if(!sig) continue;

let time=rTime(start,end);

SIGNALS.push(`â§‰ M1;${p};${time} âž£ ${sig}`);

if(SIGNALS.length>=20) break;
}

if(SIGNALS.length==0){
out.innerText="No Strong Setup From API";
return;
}

out.innerText=
`APX ULTRA API SIGNALS

${SIGNALS.join("\n")}

UTC+6 | Expiry M1 | 1 Step MTG

TRADING RULES
â€¢ Trade only signal time
â€¢ 1 Step Martingale Only
â€¢ Avoid News Time
â€¢ Stop After 2 Loss

Powered by APX Elite Premium`;
}

// ===== TELEGRAM FORMAT =====
function tgText(){
return `
APX ULTRA API SIGNALS

${SIGNALS.join("\n")}

UTC+6 | Expiry M1 | 1 Step MTG

TRADING RULES
â€¢ Trade only signal time
â€¢ 1 Step Martingale Only
â€¢ Avoid News Time
â€¢ Stop After 2 Loss

Powered by APX Elite Premium
`;
}

// ===== SEND TELEGRAM =====
async function sendTG(){

if(SIGNALS.length==0){
alert("Generate Signals First");
return;
}

await fetch(SEND,{
method:"POST",
body:tgText()
});

alert("Signals Sent To Telegram");
}

</script>

</body>
</html>
