<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>APX ULTRA PREMIUM</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">

<style>
:root { --neon:#00ffcc; --bg:#010409; --call:#00ff88; --put:#ff3366; --gold:#ffcc00; }
body { margin:0; background:var(--bg); font-family:'Rajdhani'; color:white; }
header { padding:20px; text-align:center; border-bottom:2px solid var(--neon); background:black; box-shadow:0 0 15px var(--neon); }
.logo { font-family:'Orbitron'; color:var(--neon); font-size:24px; }
.container { max-width:480px; margin:20px auto; padding:15px; }
.panel { background:#0d1117; border:1px solid rgba(0,255,204,0.3); border-radius:20px; padding:20px; }
select { width:100%; padding:12px; background:#020617; color:white; border:1px solid #30363d; border-radius:10px; margin-bottom:15px; }
button { width:100%; padding:16px; background:var(--neon); color:black; border:none; border-radius:12px; font-family:'Orbitron'; font-weight:bold; cursor:pointer; }
#output { margin-top:20px; padding:10px; border:1px dashed var(--neon); border-radius:15px; min-height:200px; }
.sig-row { display:flex; justify-content:space-between; padding:10px; border-bottom:1px solid #222; }
.time { color:var(--gold); }
.CALL { color:var(--call); font-weight:bold; }
.PUT { color:var(--put); font-weight:bold; }
</style>
</head>

<body>

<header>
<div class="logo">APX NEURAL ENGINE</div>
</header>

<div class="container">
<div class="panel">

<select id="pair">
<option value="USDINR-otc">USDINR-otc</option>
<option value="USDPKR-otc">USDPKR-otc</option>
<option value="USDBDT-otc">USDBDT-otc</option>
<option value="USDZAR-otc">USDZAR-otc</option>
<option value="BTCUSD-otc">BTCUSD-otc</option>
<option value="MSFSTK-OTC">MSFSTK-OTC</option>
</select>

<button onclick="generate()">GENERATE SMART SIGNALS</button>

<div id="output">Ready Mona ðŸ”¥ Generate dabao</div>

</div>
</div>

<script>

const API = "https://apx.mkapi009.workers.dev?pair=";

async function generate(){
    const pair = document.getElementById("pair").value;
    const output = document.getElementById("output");
    output.innerHTML = "SCANNING MARKET...";

    try{
        const res = await fetch(API + pair);
        const data = await res.json();

        const candles = data?.data || [];

        if(candles.length < 20){
            output.innerHTML = "Not enough candle data";
            return;
        }

        const direction = smartAnalyze(candles);
        createSignals(pair, direction);

    }catch(e){
        output.innerHTML = "API Fetch Failed";
        console.log(e);
    }
}


function smartAnalyze(c){

    let score = 0;

    // last 30 candles weighted
    for(let i=0;i<30;i++){
        let body = c[i].close - c[i].open;

        if(body > 0) score += 1;
        else score -= 1;

        // momentum bonus
        if(i < 5){
            if(body > 0) score += 1;
            else score -= 1;
        }
    }

    // volatility filter
    let range = Math.abs(c[0].high - c[0].low);
    if(range > 0.01) score += 1;

    return score >= 0 ? "CALL" : "PUT";
}


function createSignals(pair, dir){

    const output = document.getElementById("output");
    output.innerHTML = "";

    const now = new Date();

    for(let i=1;i<=10;i++){

        let t = new Date(now.getTime() + i*60000);
        let time = t.toTimeString().slice(0,5);

        output.innerHTML += `
        <div class="sig-row">
            <span class="time">${time}</span>
            <span>${pair}</span>
            <span class="${dir}">${dir}</span>
        </div>`;
    }
}

</script>

</body>
</html>
